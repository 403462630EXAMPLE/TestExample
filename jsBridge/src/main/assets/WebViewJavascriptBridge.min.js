!function(){function e(e){s=e.createElement("iframe"),s.style.display="none",e.documentElement.appendChild(s)}function n(e){if(YTXBridge._messageHandler)throw new Error("YTXBridge.init called twice");YTXBridge._messageHandler=e;var n=f;f=null;for(var r=0;r<n.length;r++)d(n[r])}function r(e,n){i({data:e},n)}function a(e,n){u[e]=n}function t(e,n,r){i({handlerName:e,data:n},r)}function i(e,n){if(n){var r="cb_"+m++ +"_"+(new Date).getTime();h[r]=n,e.callbackId=r}l.push(e),console.log("_doSend: iframe.src="+g+"://"+v),s.src=g+"://"+v}function o(){var e=JSON.stringify(l);l=[],console.log("_fetchQueue: iframe.src="+g+"://return/_fetchQueue/"+e),s.src=g+"://return/_fetchQueue/"+encodeURIComponent(e)}function d(e){setTimeout(function(){var n=JSON.parse(e);if(n.responseId){var r=h[n.responseId];if(!r)return;r(n.responseData),delete h[n.responseId]}else{var r;if(n.callbackId){var a=n.callbackId;r=function(e){i({responseId:a,responseData:e})}}var t=YTXBridge._messageHandler;n.handlerName&&(t=u[n.handlerName]);try{t(JSON.parse(n.data),r)}catch(o){"undefined"!=typeof console&&(console.log(o),console.log(n),console.log("YTXBridge: WARNING: javascript handler threw."))}}})}function c(e){f?f.push(e):d(e)}if(!window.YTXBridge){var s,l=[],f=[],u={},g="yy",v="__QUEUE_MESSAGE__",h={},m=1;window.YTXBridge={init:n,send:r,registerHandler:a,callHandler:t,_fetchQueue:o,addEventListener:a,fireEvent:t,_handleMessageFromYTX:c};var p=document;e(p);var _=p.createEvent("Events");_.initEvent("YTXBridgeReady"),_.bridge=YTXBridge,p.dispatchEvent(_)}}();